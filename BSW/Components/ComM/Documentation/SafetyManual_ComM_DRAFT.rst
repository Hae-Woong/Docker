Safety Manual ComM
##################

Safety requirements
*******************

.. smi:: SMI-542049

    This component assumes the following safety requirements:
    
    
    .. list-table::
       :header-rows: 1
       :widths: 25 45 20 10
    
       * - ID
         - Safety Requirement
         - Associated TSR
         - ASIL 

       * - CREQ-102775
         - ComM shall provide a service to initialize itself.
         - TSR-1
         - ASIL D

       * - CREQ-1266
         - ComM shall coordinate multiple communication requests.
         - TSR-100551
         - ASIL D

       * - CREQ-1267
         - ComM shall provide a service to request a communication mode.
         - TSR-100551
         - ASIL D

       * - CREQ-102676
         - ComM shall provide a service to set the Communication Allowed status.
         - TSR-100551
         - ASIL D

       * - CREQ-1306
         - ComM shall maintain Minimum Full Com Mode Duration.
         - TSR-100551
         - ASIL D

       * - CREQ-102518
         - ComM shall shut down communication on channels with Nm.
         - TSR-100551
         - ASIL D

       * - CREQ-1270
         - ComM shall provide a service to prevent waking up channels.
         - TSR-100551
         - ASIL D

       * - CREQ-1271
         - ComM shall provide a service to limit communication to NO_COM.
         - TSR-100551
         - ASIL D

       * - CREQ-109078
         - ComM shall initiate the wake-up on channels with Nm.
         - TSR-100551
         - ASIL D

       * - CREQ-1269
         - ComM shall notify user communication mode changes to Rte.
         - TSR-100551
         - ASIL D

       * - CREQ-102896
         - ComM shall notify which users are requesting a channel.
         - TSR-100551
         - ASIL D

       * - CREQ-102897
         - ComM shall notify channel communication mode changes to BswM.
         - TSR-100551
         - ASIL D

       * - CREQ-1304
         - ComM shall initiate the wake-up and keep awake channels with Nm.
         - TSR-100551
         - ASIL D

This component in addition to the assumed safety requirements ensures freedom from interference with respect to memory and timing with up to ASIL D.

Configuration constraints
*************************

.. smi:: SMI-766184

    The user of MICROSAR Safe shall ensure that the ComM master partition is assigned to the highest ASIL of all ComM partitions.
    This requirement is necessary to ensure the consistency of the state machine of this component.


Additional verification measures
********************************

.. smi:: SMI-94

    The user of MICROSAR Safe shall verify that the array size generated by ComM matches to the array size in the type definition of RTE. The following procedure shall be applied to each channel that has activated the ComM parameter 'Full Comm Request Notification Enabled'.
    
    - ComM_Cfg.h contains array size definition in the format COMM_MAX_CR_<ShortNameOfChannel>
    - rte_type.h contains the definition of the corresponding structure type in the format ComM_UserHandleArrayType_<ShortNameOfChannel>
    - Verify that the structure member 'handleArray' has the same size as the corresponding define value of ComM in 1).
    - Verify the content of the generated functions ComM_CurrentChannelRequestInit and ComM_CurrentChannelRequestNotification to ensure that the proper define COMM_MAX_CR_<ShortNameOfChannel> is used to limit the array index when writing to ComM_UserHandleArrayType_<ShortNameOfChannel>.handleArray[].
    
    This requirement is necessary to ensure freedom from interference with respect to memory by this component.


.. smi:: SMI-95

    The user of MICROSAR Safe shall verify that the value of ComSignalLength (byte) in Com module is smaller or equal to the value of COMM_PNC_SIGNAL_LENGTH (can be found in ComM_Cfg.h).
    This shall be verified for each ComPncSignal referenced by Partial Network Clusters and having ComMPncComSignalDirection = RX.
    
    This requirement is necessary to ensure freedom from interference with respect to memory by this component.


.. smi:: SMI-1046

    The user of MICROSAR Safe shall verify that each element of table ``ComM_UserModeNotiFunc`` refers either a ``NULL_PTR`` or a function that has the following signature (the placeholder ``<name>`` represents the function's name):
    
    ``Std_ReturnType <name>(uint8 nextMode)``
    
    The table ``ComM_UserModeNotiFunc`` can be found in ComM_Lcfg.c. This measure is only needed if at least one ComM user has enabled the parameter 'User Mode Notification'.
    
    This requirement is necessary to ensure usage in a released configuration.


.. smi:: SMI-495291

    The user of MICROSAR Safe shall verify that every network is internally requested as soon as a safety-relevant section is entered. The networks shall only be released when a safety-relevant section is left.
    
    The internal request shall be done by an user request (``ComM_RequestComMode()``). 
    
    This SMI is required to ensure that ComM is able to maintain the bus communication regardless of the network management (NM). If there is any internal request present for a network, the NM is not able to shutdown the communication for this network, i.e. sending Application-messages cannot be interrupted or stopped by the NM.


Safety requirements required from other components
**************************************************

.. smi:: SMI-553860

    This component requires mode switching functionality as an assumed safety requirement (TSR-100551) from other interfacing components.
    
    For components provided as part of MICROSAR Safe, the respective section of the Safety Manual for that component allows you identifying if this requirement is fulfilled.
    
    This requirement is only applicable if TSR-100551 is assumed as a safety requirement.


Dependencies to hardware
************************

This component does not use a direct hardware interface.

